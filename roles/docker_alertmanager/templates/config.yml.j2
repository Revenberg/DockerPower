global:
  resolve_timeout: 1m

route:
  receiver: 'deuren-slack-notifications'
  match_re:
    - name: Deuren
  receiver: 'mqtt-slack-notifications'
    match_re:
    - name: Power
  receiver: 'system-slack-notifications'
#    match_re:
#    - name: AllInstances


receivers:
- name: 'deuren-slack-notifications'
  slack_configs:
  - channel: '#deuren'
    slack_api_url: '{| slack_deuren_webhook |}'
    title: '{{ .Annotations.title }} http://{| ext_ip |}:3000/d/IY_TzAggk/deuren {% raw %}{{ .GroupLabels.alertname }} {{ .GroupLabels.app }}{% endraw %}'
    text: "<!channel> \n{% raw %}summary: {{ .Annotations.summary }}\ndescription: {{ .Annotations.description }}{% endraw %}http://{| ext_ip |}:3000/d/IY_TzAggk/deuren {% raw %}{{ .GroupLabels.alertname }} {{ .GroupLabels.app }}{% endraw %}"
    send_resolved: true      
- name: 'mqtt-slack-notifications'
  slack_configs:
  - channel: '#mqtt'
    slack_api_url: '{| slack_mqtt_webhook |}'
    title: '{{ .Annotations.title }} {% endraw %}'
    text: "<!channel> \n{% raw %}summary: {{ .Annotations.summary }}\ndescription: {{ .Annotations.description }}{% endraw %}"
    send_resolved: true      
- name: 'system-slack-notifications'
  slack_configs:
  - channel: '#system'
    slack_api_url: '{| slack_system_webhook |}'
    title: '{{ .Annotations.title }} {% endraw %}'
    text: "<!channel> \n{% raw %}summary: {{ .Annotations.summary }}\ndescription: {{ .Annotations.description }}{% endraw %}"
    send_resolved: true      
